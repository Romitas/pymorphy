Интеграция с django
===================

Для django на настоящий момент готов 1 шаблонный тег,
позволяющий произвольно склонять слова.

Настройка
---------

1. Описываем в settings.py установленные словари::

    PYMORPHY_DICTS = {
        'ru': {
            'dir': '/usr/share/pymorphy/ru',
            'backend': 'tcb',
            'use_cache': True,
            'default': True
        },

        'en': {
            'dir': '/usr/share/pymorphy/en',
        },
    }

.. glossary::

    dir
        обязательный параметр, путь до папки с файлами
    backend
        используемое key-value хранилище ('shelve' по умолчанию)
    use_cache
        использовать ли кэш (True по умолчанию),
    default
        является ли словарь словарем по умолчанию (который будет
        использоваться в template-tag'ах). Пока довольно бесполезен.

2. Добавляем pymorphy в INSTALLED_APPS

3. Подключаем в шаблоне библиотеку тегов::

    {% load pymorphy_tags %}


Шаблонные теги
--------------

inflect
^^^^^^^

Меняет грамматическую форму каждого слова на указанную в параметрах.
Про доступные параметры можно почитать тут: :ref:`parameter-format`

Пытается сохранить написание больших-маленьких букв (обрабатываются варианты
"ВСЕ СЛОВО БОЛЬШИМИ", "С заглавной", "все маленькими").

Если по какой-то причине смена формы не удалась, вернет исходную строку.

Пример::

   {% load pymorphy_tags %}

   {# в переменной city "Нижний Новгород" #}
   Мы начали работу в {{ city|inflect:"пр" }}!

   {# выведет "Мы начали работу в Нижнем Новгороде!" #}

.. note::

    На данный момент это все плохо работает с фамилиями. С именами и
    отчествами - лучше, с фамилиями - косячит.

