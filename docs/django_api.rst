Интеграция с django
===================

Для django на настоящий момент готовы 2 шаблонных фильтра,
позволяющие произвольно склонять слова.

Настройка
---------

1. Описываем в settings.py установленные словари::

    PYMORPHY_DICTS = {
        'ru': {
            'dir': '/usr/share/pymorphy/ru',
            'backend': 'tcb',
            'use_cache': True,
            'default': True
        },

        'en': {
            'dir': '/usr/share/pymorphy/en',
        },
    }

.. glossary::

    dir
        обязательный параметр, путь до папки с файлами
    backend
        используемое key-value хранилище ('shelve' по умолчанию)
    use_cache
        использовать ли кэш (True по умолчанию),
    default
        является ли словарь словарем по умолчанию (который будет
        использоваться в template-tag'ах). Пока довольно бесполезен.

2. Добавляем pymorphy в INSTALLED_APPS

3. Подключаем в шаблоне библиотеку тегов::

    {% load pymorphy_tags %}


Шаблонные фильтры
-----------------

inflect
^^^^^^^

Меняет грамматическую форму каждого слова на указанную в параметрах.
Про доступные параметры можно почитать тут: :ref:`parameter-format`

Пытается сохранить написание больших-маленьких букв (обрабатываются варианты
"ВСЕ СЛОВО БОЛЬШИМИ", "С заглавной", "все маленькими").

Если по какой-то причине смена формы не удалась, вернет исходную строку.

Пример::

   {% load pymorphy_tags %}

   {# в переменной city "Нижний Новгород" #}
   Мы начали работу в {{ city|inflect:"пр" }}!

   {# выведет "Мы начали работу в Нижнем Новгороде!" #}


plural
^^^^^^

Ставит слово в форму, которая согласуется с заданным числом (1 попугай,
2 попугая, 5 попугаев).

Пытается сохранить написание больших-маленьких букв (обрабатываются варианты
"ВСЕ СЛОВО БОЛЬШИМИ", "С заглавной", "все маленькими").

Если по какой-то причине смена формы не удалась, вернет исходную строку.

Пример::

   {% load pymorphy_tags %}

   {# в переменной num число попугаев (пусть = 38) #}
   На дереве {{ num }} {{ "попугай"|plural:num }}.
   {# выведет "На дереве 38 попугаев." #}

   {# в переменной animal - "лошадь" #}
   А еще есть {{ num }} {{ animal|plural:num }}.
   {# выведет "А еще есть 38 лошадей." #}
